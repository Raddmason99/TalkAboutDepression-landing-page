<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="stylesheet" type="text/css" href="stylesheet3.css">
  <title>Are you alone?</title>
</head>

<body>
<div class="row">
  <div class="loader" id="loader"></div> 
</div>

<div class="footer">
    <div class="Footer_inner_left"> <a href="not_al_em.html"> YES  </a> </div>
  <div class="Footer_inner_right"> <a href="al_em.html"> NO </a> </div>
</div>


  <script>
  	var words = [
  	  'Are you with your friend?'
  	];
  	
  	var letters = "abcdefghijklmnopqrstuvwxyz",
  	    speed = 60,
  	    steps = 2,
  	    loader = document.querySelector('#loader');


  	function getRandomWord() {
  	  var randomWord = words[Math.floor(Math.random() * words.length)];
  	  return randomWord;
  	}

  	function getRandomLetter() {
  	  var randomLetter = letters[Math.floor(Math.random() * letters.length)];
  	  return randomLetter;
  	}

  	function randomWordLoop() {
  	  var word = getRandomWord();
  	  var textLength = word.length;
  	  for(var i = 0; i < textLength; i++) {    
  	    (function(i,word){
  	      letterAppear(i, word);
  	    })(i,word)
  	  }
  	  
  	  function letterAppear(i, word) {
  	    setTimeout(function() {
  	      randomLetters(i, word);
  	    }, speed*i);  
  	  }

  	  function randomLetters(i, word) {
  	    for (var j = 0; j <= steps; j++) {
  	      charsAnim(i, word, j);
  	    }
  	  }

  	  function charsAnim(i, word, j) {
  	    setTimeout(function() {
  	      var count = j; 
  	      if (j < steps) {           
  	        randomChar(i, word, count, j);
  	      } else {
  	        goodChar(i, word, count, j);
  	      }
  	      /* seems it fails less if I divide j, don't know why */
  	      /*}, (speed/steps)*(j / 1.8));*/
  	    }, ((speed/steps)*j) - (speed/steps));
  	  }

  	  function randomChar(i, word, count, j) {
  	    var letter = getRandomLetter();    
  	    if (j > 0) {
  	      var oldText = loader.textContent.slice(0, -1);
  	    } else {
  	      var oldText = loader.textContent;
  	    }
  	    loader.textContent = oldText + letter;    
  	  }

  	  function goodChar(i, word, count, j) {
  	    var oldText = loader.textContent.slice(0, -1);  
  	    loader.textContent = oldText + word[i];
  	  }
  	  
  	  function removeLetter(k) {
  	    var actualText = loader.textContent.slice(0, -1);
  	    loader.textContent = actualText;
  	    if (k == textLength - 1) {
  	      randomWordLoop();
  	    }
  	  }
  	}

  	randomWordLoop();
  </script>
</body>
</html>





